webpackJsonp([1],{NHnr:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("7+uW"),a={name:"App",data:function(){return{settings:{width:358,height:441,maxSize:20,minSize:9},rawImgFile:void 0,base64Img:void 0,canvasCtx:void 0,slider:50,imgObj:null,imgObj_h:void 0,imgObj_w:void 0,isOk:!1,s:{x:0,y:0,w:0,h:0},d:{x:0,y:0,w:0,h:0},canvas_img_scale:void 0,tempCanvasImg:void 0,tempImgSize:"--",imgHref:void 0}},computed:{},methods:{handleFile:function(t){t.target.files[0]&&(this.isOk=!0,this.rawImgFile=t.target.files[0],this.readFile_draw(t.target.files[0]))},readFile_draw:function(t){if(t){var s=this,i=new FileReader;i.readAsDataURL(t),i.onload=function(t){s.base64Img=t.currentTarget.result;var i=new Image;i.src=t.currentTarget.result,i.onload=function(){s.imgObj=i,s.imgObj_w=i.width,s.imgObj_h=i.height,s.canvas_img_scale=s.settings.width/s.settings.height>s.imgObj.width/s.imgObj.height?s.settings.width/s.imgObj.width:s.settings.height/s.imgObj.height,s.s.x=0,s.s.y=0,s.d.x=0,s.d.y=0,s.d.w=s.$refs.canvas.width,s.d.h=s.$refs.canvas.height,s.drawImg(s.imgObj)}}}else console.log("Fn: readFile  error: lost params")},set_sw_sy:function(){this.s.w=this.settings.width/this.canvas_img_scale,this.s.h=this.settings.height/this.canvas_img_scale},drawImg:function(t){this.clearCtx(),this.set_sw_sy(),this.canvasCtx.drawImage(t,this.s.x,this.s.y,this.s.w,this.s.h,this.d.x,this.d.y,this.d.w,this.d.h),this.sliderChange(this.slider)},clearCtx:function(){this.canvasCtx.clearRect(0,0,this.settings.width,this.settings.height)},resize:function(t){if(this.isOk&&this.imgObj)switch(t){case"big":console.log("big 图像"),this.clearCtx(),this.canvas_img_scale=1.05*this.canvas_img_scale,this.drawImg(this.imgObj);break;case"small":console.log("small 图像"),this.clearCtx(),this.canvas_img_scale=this.canvas_img_scale/1.05,this.drawImg(this.imgObj);break;case"left":console.log("left 图像"),this.clearCtx(),this.s.x=this.s.x+Math.ceil(this.settings.width/100),this.drawImg(this.imgObj);break;case"right":console.log("right 图像"),this.clearCtx(),this.s.x=this.s.x-Math.ceil(this.settings.width/100),this.drawImg(this.imgObj);break;case"up":console.log("up 图像"),this.clearCtx(),this.s.y=this.s.y+2,this.drawImg(this.imgObj);break;case"down":console.log("up 图像"),this.clearCtx(),this.s.y=this.s.y-2,this.drawImg(this.imgObj);break;default:console.log("resize err： 未知的图像处理参数")}else this.$message.error("请在右侧先上传一张本地图片（.png/.jpg）")},sliderChange:function(t){if(this.isOk){var s=this.$refs.canvas.toDataURL("image/jpeg",t/100);this.tempCanvasImg=s,this.tempImgSize=(s.length/1024/1.335).toFixed(2)+"kb"}else this.$message.error("请在右侧先上传一张本地图片（.png/.jpg）")},saveCanvasImg:function(){this.tempCanvasImg?document.write('<img src="'+this.tempCanvasImg+'"/>'):this.$message.error("请在右侧窗口上传一张本地图片（.png/.jpg）")},refreshWindow:function(){window.location.reload()}},mounted:function(){console.log("mounted:>>>>>>>>>>>>>>>>>>>>>>>>"),console.log("canvas尺寸: w = "+this.settings.width+" ; h = "+this.settings.height+" "),this.$refs.canvas.width=this.settings.width,this.$refs.canvas.height=this.settings.height,this.canvasCtx=this.$refs.canvas.getContext("2d"),console.log("mounted:<<<<<<<<<<<<<<<<<<<<<<<")},beforeUpdate:function(){},updated:function(){console.log("updated:>>>>>>>>>>>>>>>>>>>>>>>>"),console.log("canvas尺寸: w = "+this.settings.width+" ; h = "+this.settings.height+" "),this.$refs.canvas.width=this.settings.width,this.$refs.canvas.height=this.settings.height,this.d.w=this.settings.width,this.d.h=this.settings.height;this.isOk&&this.imgObj?this.drawImg(this.imgObj):console.log("updated: can not handle file and draw"),console.log("updated:<<<<<<<<<<<<<<<<<<<<<<< \t\t")}},n={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("el-container",{attrs:{id:"app"}},[i("el-header",[i("h1",[t._v("ImageResizer")])]),t._v(" "),i("el-container",[i("el-aside",[i("h2",[t._v("第一步：输出尺寸设定")]),t._v(" "),i("div",{staticClass:"box"},[i("el-input",{attrs:{size:"small"},model:{value:t.settings.width,callback:function(s){t.$set(t.settings,"width",s)},expression:"settings.width"}},[i("template",{slot:"prepend"},[t._v("宽度：")]),t._v(" "),i("template",{slot:"append"},[t._v("px")])],2),t._v(" "),i("el-input",{attrs:{size:"small"},model:{value:t.settings.height,callback:function(s){t.$set(t.settings,"height",s)},expression:"settings.height"}},[i("template",{slot:"prepend"},[t._v("高度：")]),t._v(" "),i("template",{slot:"append"},[t._v("px")])],2)],1),t._v(" "),i("h2",[t._v("第二步：上传本地图片")]),t._v(" "),i("div",{staticClass:"box"},[i("p",[t._v('\n          点击右侧 "+" 按钮，添加本地图片。支持的格式 PNG/JPEG 。\n        ')])]),t._v(" "),i("h2",[t._v("第三步：调整图片位置")]),t._v(" "),i("div",{staticClass:"box set_btns"},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",circle:""},on:{click:function(s){t.resize("big")}}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-minus",circle:""},on:{click:function(s){t.resize("small")}}}),t._v(" "),i("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-arrow-left",circle:""},on:{click:function(s){t.resize("left")}}}),t._v(" "),i("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-arrow-right",circle:""},on:{click:function(s){t.resize("right")}}}),t._v(" "),i("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-arrow-down",circle:""},on:{click:function(s){t.resize("down")}}}),t._v(" "),i("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-arrow-up",circle:""},on:{click:function(s){t.resize("up")}}})],1),t._v(" "),i("h2",[t._v("第四步：输出质量调整")]),t._v(" "),i("div",{staticClass:"box"},[i("el-slider",{on:{change:t.sliderChange},model:{value:t.slider,callback:function(s){t.slider=s},expression:"slider"}}),t._v(" "),i("p",{staticClass:"filesizeTip"},[t._v(" 文件大小约为\n          "),i("span",[t._v(t._s(t.tempImgSize))])])],1),t._v(" "),i("h2",[t._v("第五步：生成图片")]),t._v(" "),i("div",{staticClass:"box"},[i("button",{on:{click:function(s){t.saveCanvasImg()}}},[t._v("生成图片")]),t._v(" "),i("p",[t._v("\n          提示：点击上方按钮，相应尺寸和大小的文件会在浏览器中生成，请【右击】->【另存为...】\n        ")])])]),t._v(" "),i("el-main",[i("div",{staticClass:"img_box"},[t.isOk?t._e():i("div",{staticClass:"btn_addimg"},[i("i",{staticClass:"el-icon-plus"}),t._v(" "),i("input",{attrs:{type:"file",accept:"image/png,image/jpeg"},on:{change:t.handleFile}})]),t._v(" "),i("canvas",{directives:[{name:"show",rawName:"v-show",value:t.isOk,expression:"isOk"}],ref:"canvas"}),t._v(" "),t.isOk?i("span",{staticClass:"btn_reset",on:{click:t.refreshWindow}},[i("i",{staticClass:"el-icon-close"})]):t._e()])])],1),t._v(" "),i("el-footer",[t._v(" ©Mirror ")])],1)},staticRenderFns:[]};var l=i("VU/8")(a,n,!1,function(t){i("Qa61")},null,null).exports,h=i("zL8q"),o=i.n(h);i("tvR6");e.default.use(o.a),e.default.config.productionTip=!1,new e.default({el:"#app",components:{App:l},template:"<App/>"})},Qa61:function(t,s){},tvR6:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.193f5bc600d24f6787b0.js.map